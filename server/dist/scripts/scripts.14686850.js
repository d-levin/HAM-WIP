"use strict";angular.module("clientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/mycontrollers",{templateUrl:"views/controllers.html",controller:"ControllerCtrl",controllerAs:"controllers"}).when("/mydevices",{templateUrl:"views/devices.html",controller:"DeviceCtrl",controllerAs:"devices"}).when("/mysubscription",{templateUrl:"views/subscription.html",controller:"SubscriptionCtrl",controllerAs:"subscription"}).when("/myaccountsettings",{templateUrl:"views/accountsettings.html",controller:"AccountSettingsCtrl",controllerAs:"accountsettings"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("clientApp").controller("MainCtrl",["$scope","$cookies","$http",function(a,b,c){a.$on("$routeChangeSuccess",function(){var d="dennis.a.levin@gmail.com";c.get("http://localhost:8080/users/username/"+d).success(function(c){a.email=c.email,a.firstName=c.firstName,b.put("userId",c._id)})})}]),angular.module("clientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("ControllerCtrl",["$scope","$cookies","$http",function(a,b,c){c.get("http://localhost:8080/controllers/byuser/"+b.get("userId")).success(function(b){for(var c=0;c<b.length;c++)b[c].controllerNum=c+1;a.items=b,a.sortType="index",a.sortReverse=!1})}]),angular.module("clientApp").controller("DeviceCtrl",["$scope","$cookies","$http","$log",function(a,b,c,d){a.sortType="index",a.sortReverse=!1,a.searchDevice="",a.change=function(a){d.info("Changing device id: "+a)},a.removeDevice=function(b,d){c["delete"]("http://localhost:8080/devicebindings/"+b+"/"+d).success(function(){for(var c=0,d=0;d<a.items.length;d++)if(a.items[d]._id===b){c=d;break}a.items.splice(c,1),a.searchDevice="",a.updated=!0}).error(function(){a.updated=!1})},c.get("http://localhost:8080/users/"+b.get("userId")).success(function(b){var d=b.controllers;d.length>0&&c.get("http://localhost:8080/controllers/").success(function(b){var e=[],f=0,g=0;for(f=0;f<d.length;f++)for(g=0;g<b.length;g++)if(d[f]===b[g]._id){e.push(b[g]);break}var h=[];for(f=0;f<e.length;f++)for(g=0;g<e[f].devices.length;g++)h.push(e[f].devices[g]);h.length>0&&c.get("http://localhost:8080/devices").success(function(b){var c=[];for(f=0;f<h.length;f++)for(g=0;g<b.length;g++)if(h[f]===b[g]._id){b[g].deviceNum=f+1,c.push(b[g]);break}a.items=c})})})}]),angular.module("clientApp").controller("AccountSettingsCtrl",["$scope","$location","$cookies","$http","$log",function(a,b,c,d,e){d.get("http://localhost:8080/users/"+c.get("userId")).success(function(b){a.firstName=b.firstName,a.lastName=b.lastName,a.email=b.email,a.street1=b.street1,a.street2=b.street2,a.state=b.state,a.zip=b.zip,a.country=b.country,a.phone=b.phone,a.password=b.password}),a.returnHome=function(){b.path("/")},a.updateUser=function(){var b="";b+="firstName="+a.firstName+"&",b+="lastName="+a.lastName+"&",b+="phone="+a.phone+"&",b+="email="+a.email+"&",b+="street1="+a.street1+"&",b+="street2="+a.street2+"&",b+="state="+a.state+"&",b+="zip="+a.zip+"&",b+="country="+a.country+"&",b+="password="+a.password;var f={headers:{"Content-Type":"application/x-www-form-urlencoded"}};d.put("http://localhost:8080/users/"+c.get("userId"),b,f).success(function(){a.updated=!0,a.submitted=!0}).error(function(b){a.updated=!1,a.submitted=!1,e.error("User update failed: "+b)})}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/accountsettings.html",'<div class="container"> <h2>Account Settings:</h2> <form role="form" class="form-horizontal" ng-submit="updateUser()"> <div class="form-group"> <label class="col-sm-3 control-label" for="firstName">First name</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="firstName" id="firstName" placeholder="Enter first name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="lastName">Last name</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="lastName" id="lastName" placeholder="Enter last name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="email">Email</label> <div class="col-sm-9"> <input type="email" class="form-control" ng-model="email" id="email" placeholder="Enter email address"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="password">Password</label> <div class="col-sm-9"> <input type="password" class="form-control" ng-model="password" id="password" placeholder="Enter new password"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="phone">Phone</label> <div class="col-sm-9"> <input type="tel" class="form-control" ng-model="phone" id="phone" placeholder="Enter phone number"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="street1">Address Line 1</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="street1" id="street1" placeholder="Enter street address, P.O. box, C/O"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="street2">Address Line 2</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="street2" id="street2" placeholder="Enter apartment, suite, unit, building, floor, etc"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="zip">ZIP Code</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="zip" id="zip" placeholder="Enter ZIP code"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="country">Country</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="country" id="country" placeholder="Enter country"> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <div class="btn-group btn-group-justified"> <div class="btn-group"> <button class="btn btn-default">Update</button> </div> <div class="btn-group"> <button type="button" class="btn btn-default" ng-click="returnHome()">Cancel</button> </div> <div class="btn-group"> <button ng-disabled="submitted !== true" type="button" class="btn btn-default" ng-click="returnHome()">Back</button> </div> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-9"> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> User updated. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> User not updated. </div> </div> </div> </form> </div>'),a.put("views/controllers.html",'<div class="container"> <h2>Your Controllers:</h2> <table class="table table-bordered table-striped"> <thead> <tr> <td><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'make\'; sortReverse = !sortReverse">Make <span ng-show="sortType == \'make\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'make\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'model\'; sortReverse = !sortReverse">Model <span ng-show="sortType == \'model\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'model\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'version\'; sortReverse = !sortReverse">Version <span ng-show="sortType == \'version\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'version\' && sortReverse" class="fa fa-caret-down"></span></a></td> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse"> <td>{{item.controllerNum}}</td> <td>{{item.make}}</td> <td>{{item.model}}</td> <td>{{item.version}}</td> </tr> </tbody> </table> </div>'),a.put("views/devices.html",'<div class="container"> <h2>Your Devices:</h2> <form> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i></div> <input type="text" class="form-control" placeholder="Search devices" ng-model="searchDevice"> </div> </div> </form> <table class="table table-bordered table-striped"> <thead> <tr> <td><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Name <span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'description\'; sortReverse = !sortReverse">Description <span ng-show="sortType == \'description\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'description\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'location\'; sortReverse = !sortReverse">Location <span ng-show="sortType == \'location\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'location\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td>On/Off</td> <td>Remove</td> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse | filter:searchDevice"> <td>{{item.deviceNum}}</td> <td>{{item.name}}</td> <td>{{item.description}}</td> <td>{{item.location}}</td> <td> <input type="checkbox" ng-model="power" ng-change="change(item._id)"> </td> <td><span class="glyphicon glyphicon-remove" ng-click="removeDevice(item._id, item.controllerId)"></span></td> </tr> </tbody> </table> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> Device removed. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> Device not removed. </div> </div>'),a.put("views/main.html",'<div class="container"> <h2>Dashboard:</h2> <ul> <li><a ng-href="/mycontrollers">View Controllers</a></li> <li> <a ng-href="/mydevices">View Devices</a></li> <li> <a ng-href="/mysubscription">Manage Subscription</a></li> <li> <a ng-href="/myaccountsettings">Account Settings</a></li> </ul> </div>')}]);