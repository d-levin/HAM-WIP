"use strict";angular.module("clientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/controllers",{templateUrl:"views/controllers.html",controller:"ControllerCtrl",controllerAs:"controllers"}).when("/devices",{templateUrl:"views/devices.html",controller:"DeviceCtrl",controllerAs:"devices"}).when("/subscription",{templateUrl:"views/subscription.html",controller:"SubscriptionCtrl",controllerAs:"subscription"}).when("/accountsettings",{templateUrl:"views/accountsettings.html",controller:"AccountSettingsCtrl",controllerAs:"accountsettings"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("clientApp").controller("MainCtrl",["$scope","$cookies","$http",function(a,b,c){a.$on("$routeChangeSuccess",function(){var d="dennis.a.levin@gmail.com";c.get("http://localhost:8080/users/username/"+d).success(function(c){a.email=c.email,a.firstName=c.firstName,b.put("userId",c._id)})})}]),angular.module("clientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("ControllerCtrl",["$scope","$cookies","$http",function(a,b,c){c.get("http://localhost:8080/users/"+b.get("userId")).success(function(b){var d=b.controllers;d.length>0&&c.get("http://localhost:8080/controllers/").success(function(b){for(var c=[],e=0;e<d.length;e++)for(var f=0;f<b.length;f++)if(d[e]===b[f]._id){b[f].controllerNum=e+1,c.push(b[f]);break}a.items=c,a.sortType="index",a.sortReverse=!1})})}]),angular.module("clientApp").controller("DeviceCtrl",["$scope","$cookies","$http","$log",function(a,b,c,d){c.get("http://localhost:8080/users/"+b.get("userId")).success(function(b){var e=b.controllers;e.length>0&&c.get("http://localhost:8080/controllers/").success(function(b){var f=[],g=0,h=0;for(g=0;g<e.length;g++)for(h=0;h<b.length;h++)if(e[g]===b[h]._id){f.push(b[h]);break}var i=[];for(g=0;g<f.length;g++)for(h=0;h<f[g].devices.length;h++)i.push(f[g].devices[h]);i.length>0&&c.get("http://localhost:8080/devices").success(function(b){var c=[];for(g=0;g<i.length;g++)for(h=0;h<b.length;h++)if(i[g]===b[h]._id){b[h].deviceNum=g+1,c.push(b[h]);break}a.items=c,a.removeDevice=function(a){d.info("removing device id: "+a)},a.change=function(a){d.info("Changing device id: "+a)},a.sortType="index",a.sortReverse=!1,a.searchDevice=""})})})}]),angular.module("clientApp").controller("AccountSettingsCtrl",["$scope","$location","$cookies","$http","$log",function(a,b,c,d,e){d.get("http://localhost:8080/users/"+c.get("userId")).success(function(b){a.firstName=b.firstName,a.lastName=b.lastName,a.email=b.email,a.phone=b.phone,a.password=b.password}),a.returnHome=function(){b.path("/")},a.updateUser=function(){var b="";b+="firstName="+a.firstName+"&",b+="lastName="+a.lastName+"&",b+="phone="+a.phone+"&",b+="email="+a.email+"&",b+="password="+a.password;var f={headers:{"Content-Type":"application/x-www-form-urlencoded"}};d.put("http://localhost:8080/users/"+c.get("userId"),b,f).success(function(){a.updated=!0,a.submitted=!0}).error(function(b){a.updated=!1,a.submitted=!1,e.error("User update failed: "+b)})}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/accountsettings.html",'<div class="container"> <h2>Account Settings:</h2> <form role="form" class="form-horizontal" ng-submit="updateUser()"> <div class="form-group"> <label class="col-sm-2 control-label" for="firstName">First name</label> <div class="col-sm-10"> <input type="text" class="form-control" ng-model="firstName" id="firstName" placeholder="Enter first name"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label" for="lastName">Last name</label> <div class="col-sm-10"> <input type="text" class="form-control" ng-model="lastName" id="lastName" placeholder="Enter last name"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label" for="email">Email</label> <div class="col-sm-10"> <input type="email" class="form-control" ng-model="email" id="email" placeholder="Enter email address"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label" for="password">Password</label> <div class="col-sm-10"> <input type="password" class="form-control" ng-model="password" id="password" placeholder="Enter new password"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label" for="phone">Phone</label> <div class="col-sm-10"> <input type="tel" class="form-control" ng-model="phone" id="phone" placeholder="Enter phone number"> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <div class="btn-group btn-group-justified"> <div class="btn-group"> <button class="btn btn-default">Update</button> </div> <div class="btn-group"> <button type="button" class="btn btn-default" ng-click="returnHome()">Cancel</button> </div> <div class="btn-group"> <button ng-disabled="submitted !== true" type="button" class="btn btn-default" ng-click="returnHome()">Back</button> </div> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> User updated. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> User not updated. </div> </div> </div> </form> </div>'),a.put("views/controllers.html",'<div class="container"> <h2>Your Controllers:</h2> <table class="table table-bordered table-striped"> <thead> <tr> <td><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'make\'; sortReverse = !sortReverse">Make <span ng-show="sortType == \'make\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'make\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'model\'; sortReverse = !sortReverse">Model <span ng-show="sortType == \'model\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'model\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'version\'; sortReverse = !sortReverse">Version <span ng-show="sortType == \'version\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'version\' && sortReverse" class="fa fa-caret-down"></span></a></td> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse"> <td>{{item.controllerNum}}</td> <td>{{item.make}}</td> <td>{{item.model}}</td> <td>{{item.version}}</td> </tr> </tbody> </table> </div>'),a.put("views/devices.html",'<div class="container"> <h2>Your Devices:</h2> <form> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i></div> <input type="text" class="form-control" placeholder="Search devices" ng-model="searchDevice"> </div> </div> </form> <table class="table table-bordered table-striped"> <thead> <tr> <td><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Name <span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'description\'; sortReverse = !sortReverse">Description <span ng-show="sortType == \'description\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'description\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td><a href="" ng-click="sortType = \'location\'; sortReverse = !sortReverse">Location <span ng-show="sortType == \'location\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'location\' && sortReverse" class="fa fa-caret-down"></span></a></td> <td>On/Off</td> <td>Remove</td> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse | filter:searchDevice"> <td>{{item.deviceNum}}</td> <td>{{item.name}}</td> <td>{{item.description}}</td> <td>{{item.location}}</td> <td> <input type="checkbox" ng-model="power" ng-change="change(item._id)"> </td> <td><span class="glyphicon glyphicon-remove" ng-click="removeDevice(item._id)"></span></td> </tr> </tbody> </table> </div>'),a.put("views/main.html",'<div class="container"> <h2>Dashboard:</h2> <ul> <li><a ng-href="/controllers">View Controllers</a></li> <li> <a ng-href="/devices">View Devices</a></li> <li> <a ng-href="/subscription">Manage Subscription</a></li> <li> <a ng-href="/accountsettings">Account Settings</a></li> </ul> </div>')}]);