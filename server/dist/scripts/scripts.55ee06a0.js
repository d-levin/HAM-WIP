"use strict";angular.module("app",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).constant("serverURL","http://localhost:8080").config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/signin.html",controller:"SignInCtrl",controllerAs:"signin"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignUpCtrl",controllerAs:"signup"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/mycontrollers",{templateUrl:"views/controllers.html",controller:"ControllerCtrl",controllerAs:"controllers"}).when("/mydevices",{templateUrl:"views/devices.html",controller:"DeviceCtrl",controllerAs:"devices"}).when("/mydevices/add",{templateUrl:"views/add-devices.html",controller:"AddDeviceCtrl",controllerAs:"add-devices"}).when("/mysubscription",{templateUrl:"views/subscription.html",controller:"SubscriptionCtrl",controllerAs:"subscription"}).when("/myaccountsettings",{templateUrl:"views/accountsettings.html",controller:"AccountSettingsCtrl",controllerAs:"accountsettings"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("app").controller("DashboardCtrl",["$scope","$rootScope",function(a,b){a.onInit=function(){b.currentView="Dashboard",b.dashboard=!0}}]),angular.module("app").controller("ControllerCtrl",["$scope","$cookies","$http","$rootScope","serverURL",function(a,b,c,d,e){a.onInit=function(){d.currentView="Controllers",c.get(e+"/controllers/byuser/"+b.get("userId")).success(function(b){for(var c=0;c<b.length;c++)b[c].controllerNum=c+1;a.items=b,a.sortType="index",a.sortReverse=!1})}}]),angular.module("app").controller("DeviceCtrl",["$scope","$cookies","$http","$log","$rootScope","serverURL",function(a,b,c,d,e,f){a.sortType="index",a.sortReverse=!1,a.searchDevice="",a.change=function(a){d.info("Changing device id: "+a)},a.unregDevice=function(b){c.put(f+"/devices/unregister/"+b).success(function(){for(var c=0,d=0;d<a.items.length;d++)if(a.items[d]._id===b){c=d;break}a.items.splice(c,1),a.searchDevice="",a.updated=!0}).error(function(){a.updated=!1})},a.onInit=function(){e.currentView="Manage Devices",c.get(f+"/users/"+b.get("userId")).success(function(b){var d=b.controllers;d&&d.length>0&&c.get(f+"/controllers/").success(function(b){var e=[],g=0,h=0;for(g=0;g<d.length;g++)for(h=0;h<b.length;h++)if(d[g]===b[h]._id){e.push(b[h]);break}var i=[];for(g=0;g<e.length;g++)for(h=0;h<e[g].devices.length;h++)i.push(e[g].devices[h]);i.length>0&&c.get(f+"/devices").success(function(b){var c=[],d=1;for(g=0;g<i.length;g++)for(h=0;h<b.length;h++)if(i[g]===b[h]._id&&b[h].registered===!0){b[h].deviceNum=d++,c.push(b[h]);break}a.items=c})})})}}]),angular.module("app").controller("AddDeviceCtrl",["$scope","$cookies","$http","$rootScope","serverURL",function(a,b,c,d,e){a.sortType="index",a.sortReverse=!1,a.searchDevice="",a.registerDevice=function(b){c.put(e+"/devices/register/"+b,{registered:!0}).success(function(){for(var c=0,d=0;d<a.items.length;d++)if(a.items[d]._id===b){c=d;break}a.items.splice(c,1),a.searchDevice="",a.updated=!0}).error(function(){a.updated=!1})},a.onInit=function(){d.currentView="Add Devices",c.get(e+"/users/"+b.get("userId")).success(function(b){var d=b.controllers;d.length>0&&c.get(e+"/controllers/").success(function(b){var f=[],g=0,h=0;for(g=0;g<d.length;g++)for(h=0;h<b.length;h++)if(d[g]===b[h]._id){f.push(b[h]);break}var i=[];for(g=0;g<f.length;g++)for(h=0;h<f[g].devices.length;h++)i.push(f[g].devices[h]);i.length>0&&c.get(e+"/devices").success(function(b){var c=[],d=1;for(g=0;g<i.length;g++)for(h=0;h<b.length;h++)if(i[g]===b[h]._id&&b[h].registered===!1){b[h].deviceNum=d++,c.push(b[h]);break}a.items=c})})})}}]),angular.module("app").controller("AccountSettingsCtrl",["$scope","$location","$cookies","$http","$rootScope","serverURL",function(a,b,c,d,e,f){a.onInit=function(){e.currentView="Account Settings",d.get(f+"/users/"+c.get("userId")).success(function(b){a.firstName=b.firstName,a.lastName=b.lastName,a.email=b.email,a.street1=b.street1,a.street2=b.street2,a.state=b.state,a.zip=b.zip,a.country=b.country,a.phone=b.phone,a.password=b.password})},a.returnHome=function(){b.path("/dashboard")},a.updateUser=function(){var b="";b+="firstName="+a.firstName+"&",b+="lastName="+a.lastName+"&",b+="phone="+a.phone+"&",b+="email="+a.email+"&",b+="street1="+a.street1+"&",b+="street2="+a.street2+"&",b+="state="+a.state+"&",b+="zip="+a.zip+"&",b+="country="+a.country+"&",b+="password="+a.password;var g={headers:{"Content-Type":"application/x-www-form-urlencoded"}};d.put(f+"/users/"+c.get("userId"),b,g).success(function(){a.updated=!0,a.submitted=!0,e.firstName=a.firstName,e.email=a.email}).error(function(){a.updated=!1,a.submitted=!1})}}]),angular.module("app").controller("SubscriptionCtrl",function(){}),angular.module("app").controller("SignInCtrl",["$scope","$location","$cookies","$http","$rootScope","serverURL",function(a,b,c,d,e,f){e.homeURL="/",e.currentView="Sign In",e.loggedIn=!1,a.user={username:"dennis.a.levin@gmail.com",password:"mypassword"},a.valid=!0,a.validateUser=function(){d.get(f+"/users/username/"+a.user.username).success(function(d){d?(e.username=d.email,e.email=d.email,e.firstName=d.firstName,e.loggedIn=!0,e.homeURL="/dashboard",c.put("userId",d._id),b.path("/dashboard")):a.valid=!1})}}]),angular.module("app").controller("SignUpCtrl",["$scope","$rootScope","$location",function(a,b,c){b.currentView="Sign Up",a.createUser=function(){c.path("/dashboard")}}]),angular.module("app").run(["$templateCache",function(a){a.put("views/accountsettings.html",'<div class="container-fluid" ng-init="onInit()"> <div class="row"> <div class="col-sm-12"> <form role="form" class="form-horizontal" ng-submit="updateUser()"> <div class="form-group"> <label class="col-sm-3 control-label" for="firstName">First name</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="firstName" id="firstName" placeholder="Enter first name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="lastName">Last name</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="lastName" id="lastName" placeholder="Enter last name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="email">Email</label> <div class="col-sm-9"> <input type="email" class="form-control" ng-model="email" id="email" placeholder="Enter email address"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="password">Password</label> <div class="col-sm-9"> <input type="password" class="form-control" ng-model="password" id="password" placeholder="Enter new password"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="phone">Phone</label> <div class="col-sm-9"> <input type="tel" class="form-control" ng-model="phone" id="phone" placeholder="Enter phone number"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="street1">Address Line 1</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="street1" id="street1" placeholder="Enter street address, P.O. box, C/O"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="street2">Address Line 2</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="street2" id="street2" placeholder="Enter apartment, suite, unit, building, floor, etc"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="zip">ZIP Code</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="zip" id="zip" placeholder="Enter ZIP code"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="country">Country</label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="country" id="country" placeholder="Enter country"> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <div class="btn-group btn-group-justified"> <div class="btn-group"> <button class="btn btn-default">Update</button> </div> <div class="btn-group"> <button type="button" class="btn btn-default" ng-click="returnHome()">Cancel</button> </div> <div class="btn-group"> <button ng-disabled="submitted !== true" type="button" class="btn btn-default" ng-click="returnHome()">Back</button> </div> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-9"> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> User updated. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> User not updated. </div> </div> </div> </form> </div> </div> </div>'),a.put("views/add-devices.html",'<div class="container-fluid" ng-init="onInit()"> <form> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i></div> <input type="text" class="form-control" placeholder="Search devices" ng-model="searchDevice"> </div> </div> </form> <table class="table table-bordered table-striped"> <thead> <tr> <th><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Name <span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'description\'; sortReverse = !sortReverse">Description <span ng-show="sortType == \'description\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'description\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'location\'; sortReverse = !sortReverse">Location <span ng-show="sortType == \'location\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'location\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th>Add</th> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse | filter:searchDevice"> <td>{{item.deviceNum}}</td> <td>{{item.name}}</td> <td>{{item.description}}</td> <td>{{item.location}}</td> <td><span class="glyphicon glyphicon-plus" ng-click="registerDevice(item._id)"></span></td> </tr> </tbody> </table> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> Device registered. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> Device not registered. </div> </div>'),a.put("views/controllers.html",'<div class="container-fluid" ng-init="onInit()"> <table class="table table-bordered table-striped"> <thead> <tr> <th><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'make\'; sortReverse = !sortReverse">Make <span ng-show="sortType == \'make\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'make\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'model\'; sortReverse = !sortReverse">Model <span ng-show="sortType == \'model\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'model\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'version\'; sortReverse = !sortReverse">Version <span ng-show="sortType == \'version\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'version\' && sortReverse" class="fa fa-caret-down"></span></a></th> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse"> <td>{{item.controllerNum}}</td> <td>{{item.make}}</td> <td>{{item.model}}</td> <td>{{item.version}}</td> </tr> </tbody> </table> </div>'),a.put("views/dashboard.html",'<div class="container-fluid" ng-init="onInit()"> <div class="row"> <div class="col-sm-4"> <div class="panel panel-default"> <div class="panel-heading text-center"><a ng-href="/mycontrollers"><i class="fa fa-gamepad fa-2x icon align-fa" aria-hidden="true"></i><span class="middle">View Controllers</span></a></div> <div class="panel-body">Lists the controllers associated to your account</div> </div> </div> <div class="col-sm-4"> <div class="panel panel-default"> <div class="panel-heading text-center"><a ng-href="/mydevices/add"><i class="fa fa-plus fa-2x icon align-fa" aria-hidden="true"></i><span class="middle">Add Devices</span></a></div> <div class="panel-body">Register devices connected to your controller to be able to manage them</div> </div> </div> <div class="col-sm-4"> <div class="panel panel-default"> <div class="panel-heading text-center"><a ng-href="/mydevices"><i class="fa fa-list-alt fa-2x icon align-fa" aria-hidden="true"></i><span class="middle">Manage Devices</span></a></div> <div class="panel-body">Unregister or manipulate registered devices</div> </div> </div> </div> <div class="row"> <div class="col-sm-6"> <div class="panel panel-default"> <div class="panel-heading text-center"><a ng-href="/mysubscription"><i class="fa fa-shopping-cart fa-2x icon align-fa" aria-hidden="true"></i><span class="middle">Manage Subscription</span></a></div> <div class="panel-body">Purchase a premium subscription or revert back to a trial version</div> </div> </div> <div class="col-sm-6"> <div class="panel panel-default"> <div class="panel-heading text-center"><a ng-href="/myaccountsettings"><i class="fa fa-cogs fa-2x icon align-fa" aria-hidden="true"></i><span class="middle">Account Settings</span></a></div> <div class="panel-body">View and update account information</div> </div> </div> </div> </div>'),a.put("views/devices.html",'<div class="container-fluid" ng-init="onInit()"> <form> <div class="form-group"> <div class="input-group"> <div class="input-group-addon"><i class="fa fa-search"></i></div> <input type="text" class="form-control" placeholder="Search devices" ng-model="searchDevice"> </div> </div> </form> <table class="table table-bordered table-striped"> <thead> <tr> <th><a href="" ng-click="sortType = \'index\'; sortReverse = !sortReverse"># <span ng-show="sortType == \'index\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'index\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Name <span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'description\'; sortReverse = !sortReverse">Description <span ng-show="sortType == \'description\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'description\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th><a href="" ng-click="sortType = \'location\'; sortReverse = !sortReverse">Location <span ng-show="sortType == \'location\' && !sortReverse" class="fa fa-caret-up"></span> <span ng-show="sortType == \'location\' && sortReverse" class="fa fa-caret-down"></span></a></th> <th>On/Off</th> <th>Remove</th> </tr> </thead> <tbody> <tr ng-repeat="item in items | orderBy:sortType:sortReverse | filter:searchDevice"> <td>{{item.deviceNum}}</td> <td>{{item.name}}</td> <td>{{item.description}}</td> <td>{{item.location}}</td> <td> <input type="checkbox" ng-model="power" ng-change="change(item._id)"> </td> <td><span class="glyphicon glyphicon-remove" ng-click="unregDevice(item._id)"></span></td> </tr> </tbody> </table> <div class="alert alert-success" ng-show="updated === true"> <strong>Success!</strong> Device removed. </div> <div class="alert alert-danger" ng-show="updated === false"> <strong>Failure!</strong> Device not removed. </div> </div>'),a.put("views/signin.html",'<!-- Code source http://codepen.io/colorlib/pen/rxddKy --> <div class="full-height bg-lamp"> <div class="login-page"> <div class="form"> <form class="login-form" ng-submit="validateUser()"> <input type="text" ng-model="user.username" placeholder="username (email address)" required> <input type="password" ng-model="user.password" placeholder="password" required> <button type="submit">login</button> <p class="message">Not registered? <a href="/signup">Create an account</a></p> <div class="form-group"> <div class="alert alert-danger" ng-show="!valid"> <strong>Incorrect</strong> username or password. </div> </div> </form> </div> </div> </div>'),a.put("views/signup.html",'<!-- Code source http://codepen.io/colorlib/pen/rxddKy --> <div class="login-page"> <div class="form"> <form class="register-form" ng-submit="createUser()"> <input type="text" ng-model="newFirstName" placeholder="first name" required> <input type="text" ng-model="newLastName" placeholder="last name" required> <input type="password" ng-model="newPassword" placeholder="password" required> <input type="text" ng-model="newEmail" placeholder="email address" required> <button type="submit">create</button> <p class="message">Already registered? <a href="/">Sign In</a></p> </form> </div> </div>'),a.put("views/subscription.html",'<div class="container-fluid"> <h2>Subscription:</h2> <p>This is my subscription</p> </div>')}]);